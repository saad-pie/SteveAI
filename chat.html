<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SteveAI - Chat</title>
  <meta name="description" content="SteveAI chat interface ‚Äî Modern Hybrid 3-column layout" />
  <link rel="stylesheet" href="chat.css">

  <!-- JSON-LD minimal -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "SteveAI Chat",
    "author": { "@type": "Person", "name": "saadpie" }
  }
  </script>

  <style>
    /* ===== Modern hybrid layout ===== */
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: system-ui, sans-serif;
      display: flex;
      flex-direction: column;
    }

    .app {
      display: grid;
      grid-template-areas: 
        "header header header"
        "sidebar chat gallery"
        "footer footer footer";
      grid-template-columns: 250px 1fr 250px;
      grid-template-rows: auto 1fr auto;
      height: 100vh;
      overflow: hidden;
    }

    header#header { 
      grid-area: header; display: flex; justify-content: space-between; align-items: center; padding: 0 16px; background:#1a1a1a; color:white; 
    }

    aside#sidebar { 
      grid-area: sidebar; background:#111; color:#9aa6b2; overflow-y:auto; padding:12px; display:flex; flex-direction:column; 
    }

    main#chatContainer { 
      grid-area: chat; display:flex; flex-direction:column; background:#0f0f0f; color:#e0e0e0; overflow-y:auto; padding:12px; 
    }

    aside#gallery { 
      grid-area: gallery; background:#111; color:#9aa6b2; overflow-y:auto; padding:12px; 
    }

    footer#inputContainer { 
      grid-area: footer; display:flex; padding:8px; background:#1a1a1a; 
    }

    textarea#messageInput { flex:1; padding:8px; border-radius:6px; border:none; resize:none; background:#222; color:white; }
    .btn, .action-btn, .plus-btn { cursor:pointer; background:#333; border:none; color:white; padding:6px 10px; border-radius:4px; }

    /* Sidebar specific */
    .tools-list h3 { margin-top:16px; margin-bottom:8px; color:#9aa6b2; font-size:14px; }
    .tool-item { display:block; width:100%; text-align:left; margin-bottom:4px; padding:6px 8px; border-radius:4px; background:#222; color:white; }
    .theme-cards { display:flex; flex-wrap:wrap; gap:6px; }
    .theme-card { display:flex; flex-direction:column; align-items:center; cursor:pointer; width:60px; }
    .card-preview { width:50px; height:30px; border-radius:4px; margin-bottom:4px; }
    .classic-preview { background:#222; }
    .imessage-preview { background:linear-gradient(90deg,#34C759,#5AC8FA); }
    .material-preview { background:#6200ea; }
    .terminal-preview { background:#0f0; }
    .mode-row { display:flex; justify-content:space-between; align-items:center; margin-top:8px; }

    /* Responsive */
    @media (max-width: 1024px) {
      .app {
        grid-template-areas: 
          "header"
          "chat"
          "footer";
        grid-template-columns: 1fr;
        grid-template-rows: auto 1fr auto;
      }
      aside#sidebar, aside#gallery { display:none; }
      header#header { flex-wrap: wrap; gap:8px; }
      footer#inputContainer { flex-direction: column; gap:4px; }
    }

  </style>
</head>
<body class="theme-classic">
  <div class="app" id="app">

    <!-- Header -->
    <header id="header">
      <div class="logo">
        <div class="logo-icon">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSKfhnr8aWFyvTRT3x_MKFK_YgsWp3tVCiGf_9wkOElaQ&s"
               alt="logo"
               style="width:40px;height:40px;object-fit:cover;border-radius:6px;" />
        </div>
        <div>
          <div class="brand-title">SteveAI</div>
          <div class="brand-sub muted">Hybrid ‚Äî Multi-mode chat</div>
        </div>
      </div>

      <div class="header-actions">
        <select id="modeSelect" title="Mode">
          <option value="chat" selected>SteveAI-chat</option>
          <option value="reasoning">SteveAI-reasoning</option>
          <option value="general">SteveAI-general</option>
          <option value="fast">SteveAI-fast</option>
        </select>
        <button id="memoryToggle" class="btn">üß†</button>
        <button id="clearChat" class="btn">üóëÔ∏è</button>
        <button id="themeToggle" class="btn">üåô</button>
        <button class="btn open-sidebar" id="toolsToggleMobile">‚ûï</button>
      </div>
    </header>

    <!-- Sidebar -->
    <aside id="sidebar" aria-label="Tools and settings">
      <div class="tools-list">
        <h3>Tools</h3>
        <button class="tool-item">üìé Upload File</button>
        <button class="tool-item">üåê Web Search</button>
        <button class="tool-item">üñºÔ∏è Image Gen</button>
        <button class="tool-item">üß© Plugins</button>

        <h3>Appearance</h3>
        <div class="theme-cards" id="themeCards">
          <button class="theme-card selected" data-theme="classic">
            <div class="card-preview classic-preview"></div>
            <div class="card-label">Classic</div>
          </button>
          <button class="theme-card" data-theme="imessage">
            <div class="card-preview imessage-preview"></div>
            <div class="card-label">iMessage</div>
          </button>
          <button class="theme-card" data-theme="material">
            <div class="card-preview material-preview"></div>
            <div class="card-label">Material</div>
          </button>
          <button class="theme-card" data-theme="terminal">
            <div class="card-preview terminal-preview"></div>
            <div class="card-label">Terminal</div>
          </button>
        </div>

        <div class="mode-row">
          <div class="muted">Dark Mode</div>
          <div class="toggle" id="darkToggle" role="switch" aria-checked="false" tabindex="0">
            <div class="switch" id="switch"><div class="knob"></div></div>
          </div>
        </div>

        <div class="muted small">Theme saved locally ‚Äî applies instantly.</div>

        <h3>About</h3>
        <div class="muted small">SteveAI ‚Äî one app, many looks. Toggle themes quickly in Settings.</div>
      </div>
    </aside>

    <!-- Chat center -->
    <main id="chatContainer">
      <div id="chat" class="messages" role="log" aria-live="polite"></div>
    </main>

    <!-- Gallery -->
    <aside id="gallery" aria-label="Image gallery">
      <div class="gallery-title">Gallery</div>
      <img class="img-preview" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='600' height='360'><rect width='100%' height='100%' fill='%23111111'/><text x='50%' y='50%' fill='%239aa6b2' font-size='22' text-anchor='middle' dominant-baseline='middle'>No images yet</text></svg>" alt="placeholder">
    </aside>

    <!-- Composer/Input -->
    <footer id="inputContainer">
      <form id="inputForm" autocomplete="off">
        <button class="plus-btn" id="attach" aria-label="Attachment">+</button>
        <textarea id="messageInput" placeholder="Type your message... (use /help)" rows="1" required></textarea>
        <button type="submit" id="sendBtn">‚Ü©Ô∏è</button>
      </form>
    </footer>
  </div>

  <!-- Message template -->
  <template id="msg-template">
    <div class="msg-row">
      <div class="message"></div>
      <div class="meta muted"></div>
    </div>
  </template>

  <div class="overlay-dark" aria-hidden="true"></div>

  <!-- Markdown support -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- Correct dependency order -->
  <script type="module" src="./config.js"></script>
  <script type="module" src="./utils.js"></script>
  <script type="module" src="./dom.js"></script>
  <script type="module" src="./index.js"></script>
  <script type="module" src="./chat.js"></script>
</body>
</html>
